{"version":3,"file":"hyperbole.js","mappings":"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","sources":["webpack://web-ui/./node_modules/debounce/index.js","webpack://web-ui/webpack/bootstrap","webpack://web-ui/./node_modules/omdomdom/lib/omdomdom.es.js","webpack://web-ui/./src/lib.ts","webpack://web-ui/./src/message.ts","webpack://web-ui/./src/action.ts","webpack://web-ui/./src/sockets.ts","webpack://web-ui/./src/events.ts","webpack://web-ui/./src/index.ts","webpack://web-ui/./src/response.ts","webpack://web-ui/./src/browser.ts"],"sourcesContent":["function debounce(function_, wait = 100, options = {}) {\n\tif (typeof function_ !== 'function') {\n\t\tthrow new TypeError(`Expected the first parameter to be a function, got \\`${typeof function_}\\`.`);\n\t}\n\n\tif (wait < 0) {\n\t\tthrow new RangeError('`wait` must not be negative.');\n\t}\n\n\t// TODO: Deprecate the boolean parameter at some point.\n\tconst {immediate} = typeof options === 'boolean' ? {immediate: options} : options;\n\n\tlet storedContext;\n\tlet storedArguments;\n\tlet timeoutId;\n\tlet timestamp;\n\tlet result;\n\n\tfunction run() {\n\t\tconst callContext = storedContext;\n\t\tconst callArguments = storedArguments;\n\t\tstoredContext = undefined;\n\t\tstoredArguments = undefined;\n\t\tresult = function_.apply(callContext, callArguments);\n\t\treturn result;\n\t}\n\n\tfunction later() {\n\t\tconst last = Date.now() - timestamp;\n\n\t\tif (last < wait && last >= 0) {\n\t\t\ttimeoutId = setTimeout(later, wait - last);\n\t\t} else {\n\t\t\ttimeoutId = undefined;\n\n\t\t\tif (!immediate) {\n\t\t\t\tresult = run();\n\t\t\t}\n\t\t}\n\t}\n\n\tconst debounced = function (...arguments_) {\n\t\tif (\n\t\t\tstoredContext\n\t\t\t&& this !== storedContext\n\t\t\t&& Object.getPrototypeOf(this) === Object.getPrototypeOf(storedContext)\n\t\t) {\n\t\t\tthrow new Error('Debounced method called with different contexts of the same prototype.');\n\t\t}\n\n\t\tstoredContext = this; // eslint-disable-line unicorn/no-this-assignment\n\t\tstoredArguments = arguments_;\n\t\ttimestamp = Date.now();\n\n\t\tconst callNow = immediate && !timeoutId;\n\n\t\tif (!timeoutId) {\n\t\t\ttimeoutId = setTimeout(later, wait);\n\t\t}\n\n\t\tif (callNow) {\n\t\t\tresult = run();\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tObject.defineProperty(debounced, 'isPending', {\n\t\tget() {\n\t\t\treturn timeoutId !== undefined;\n\t\t},\n\t});\n\n\tdebounced.clear = () => {\n\t\tif (!timeoutId) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout(timeoutId);\n\t\ttimeoutId = undefined;\n\t};\n\n\tdebounced.flush = () => {\n\t\tif (!timeoutId) {\n\t\t\treturn;\n\t\t}\n\n\t\tdebounced.trigger();\n\t};\n\n\tdebounced.trigger = () => {\n\t\tresult = run();\n\n\t\tdebounced.clear();\n\t};\n\n\treturn debounced;\n}\n\n// Adds compatibility for ES modules\nmodule.exports.debounce = debounce;\n\nmodule.exports = debounce;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/*!\n  * @license MIT (https://github.com/geotrev/omdomdom/blob/master/LICENSE)\n  * Omdomdom v0.3.2 (https://github.com/geotrev/omdomdom)\n  * Copyright 2023 George Treviranus <geowtrev@gmail.com>\n  */\nvar DATA_KEY_ATTRIBUTE$1 = \"data-key\";\nvar hasProperty = function hasProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n};\nvar keyIsValid = function keyIsValid(map, key) {\n  if (!key) return false;\n  if (hasProperty(map, key)) {\n    console.warn(\"[OmDomDom]: Children with duplicate keys detected. Children with duplicate keys will be skipped, resulting in dropped node references. Keys must be unique and non-indexed.\");\n    return false;\n  }\n  return true;\n};\nvar forEach = function forEach(items, fn) {\n  var length = items.length;\n  var idx = -1;\n  if (!length) return;\n  while (++idx < length) {\n    if (fn(items[idx], idx) === false) break;\n  }\n};\nvar createKeyMap = function createKeyMap(children) {\n  var map = {};\n  forEach(children, function (child) {\n    var key = child.attributes[DATA_KEY_ATTRIBUTE$1];\n    if (keyIsValid(map, key)) {\n      map[key] = child;\n    }\n  });\n  for (var _ in map) {\n    return map;\n  }\n};\nvar insertBefore = function insertBefore(parent, child, refNode) {\n  return parent.node.insertBefore(child.node, refNode);\n};\nvar assignVNode = function assignVNode(template, vNode) {\n  for (var property in template) {\n    vNode[property] = template[property];\n  }\n};\n\nvar toHTML = function toHTML(htmlString) {\n  var processedDOMString = htmlString.trim().replace(/\\s+</g, \"<\").replace(/>\\s+/g, \">\");\n  var parser = new DOMParser();\n  var context = parser.parseFromString(processedDOMString, \"text/html\");\n  return context.body;\n};\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar Types = {\n  STRING: \"string\",\n  INT: \"number\",\n  BOOL: \"boolean\"\n};\nvar DomProperties = {};\nvar createRecord = function createRecord(attrName, propName, type) {\n  return {\n    attrName: attrName,\n    propName: propName,\n    type: type\n  };\n};\nvar stringProps = [[\"style\", \"cssText\"], [\"class\", \"className\"]];\nforEach(stringProps, function (_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n    attr = _ref2[0],\n    property = _ref2[1];\n  DomProperties[attr] = createRecord(attr, property || attr, Types.STRING);\n});\nvar booleanProps = [\"autofocus\", \"draggable\", \"hidden\", \"checked\", \"multiple\", \"muted\", \"selected\"];\nforEach(booleanProps, function (attr) {\n  DomProperties[attr] = createRecord(attr, attr, Types.BOOL);\n});\nvar integerProps = [[\"tabindex\", \"tabIndex\"]];\nforEach(integerProps, function (_ref3) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n    attr = _ref4[0],\n    property = _ref4[1];\n  DomProperties[attr] = createRecord(attr, property, Types.INT);\n});\nvar Namespace = {\n  xlink: {\n    prefix: \"xlink:\",\n    resource: \"http://www.w3.org/1999/xlink\"\n  },\n  xml: {\n    prefix: \"xml:\",\n    resource: \"http://www.w3.org/XML/1998/namespace\"\n  }\n};\n\nvar setProperty = function setProperty(element, type, prop, value) {\n  switch (type) {\n    case Types.STRING:\n      {\n        if (prop === DomProperties.style.propName) {\n          if (value === null) {\n            element.style[prop] = \"\";\n          } else {\n            element.style[prop] = value;\n          }\n        } else if (value === null) {\n          element[prop] = \"\";\n        } else {\n          element[prop] = value;\n        }\n        break;\n      }\n    case Types.INT:\n      {\n        if (value === null) {\n          var attr = prop.toLowerCase();\n          element.removeAttribute(attr);\n        } else if (value === \"0\") {\n          element[prop] = 0;\n        } else if (value === \"-1\") {\n          element[prop] = -1;\n        } else {\n          var parsed = parseInt(value, 10);\n          if (!isNaN(parsed)) {\n            element[prop] = parsed;\n          }\n        }\n        break;\n      }\n    case Types.BOOL:\n      {\n        if ([\"\", \"true\"].indexOf(value) < 0) {\n          element[prop] = false;\n        } else {\n          element[prop] = true;\n        }\n        break;\n      }\n  }\n};\n\nvar removeAttributes = function removeAttributes(vNode, attributes) {\n  forEach(attributes, function (attrName) {\n    if (hasProperty(DomProperties, attrName)) {\n      var propertyRecord = DomProperties[attrName];\n      setProperty(vNode.node, propertyRecord.type, propertyRecord.propName, null);\n    } else {\n      if (attrName in vNode.node) {\n        setProperty(vNode.node, Types.STRING, attrName, null);\n      }\n      vNode.node.removeAttribute(attrName);\n    }\n    delete vNode.attributes[attrName];\n  });\n};\nvar setAttributes = function setAttributes(vNode, attributes) {\n  for (var attrName in attributes) {\n    var value = attributes[attrName];\n    vNode.attributes[attrName] = value;\n    if (hasProperty(DomProperties, attrName)) {\n      var propertyRecord = DomProperties[attrName];\n      setProperty(vNode.node, propertyRecord.type, propertyRecord.propName, value);\n      continue;\n    }\n    if (attrName.startsWith(Namespace.xlink.prefix)) {\n      vNode.node.setAttributeNS(Namespace.xlink.resource, attrName, value);\n      continue;\n    }\n    if (attrName.startsWith(Namespace.xml.prefix)) {\n      vNode.node.setAttributeNS(Namespace.xml.resource, attrName, value);\n      continue;\n    }\n    if (attrName in vNode.node) {\n      setProperty(vNode.node, Types.STRING, attrName, value);\n    }\n    vNode.node.setAttribute(attrName, value || \"\");\n  }\n};\nvar getPropertyValues = function getPropertyValues(element, attributes) {\n  for (var attrName in DomProperties) {\n    var propertyRecord = DomProperties[attrName];\n    var propName = propertyRecord.propName;\n    var attrValue = element.getAttribute(attrName);\n    if (attrName === DomProperties.style.attrName) {\n      attributes[attrName] = element.style[propName];\n    } else if (typeof attrValue === \"string\") {\n      attributes[attrName] = attrValue;\n    }\n  }\n};\nvar getBaseAttributes = function getBaseAttributes(element) {\n  return Array.prototype.reduce.call(element.attributes, function (attributes, attrName) {\n    if (!hasProperty(DomProperties, attrName.name)) {\n      attributes[attrName.name] = attrName.value;\n    }\n    return attributes;\n  }, {});\n};\nvar getAttributes = function getAttributes(element) {\n  var attributes = getBaseAttributes(element);\n  getPropertyValues(element, attributes);\n  return attributes;\n};\nvar updateAttributes = function updateAttributes(template, vNode) {\n  var removedAttributes = [];\n  var changedAttributes = {};\n  for (var attrName in vNode.attributes) {\n    var oldValue = vNode.attributes[attrName];\n    var nextValue = template.attributes[attrName];\n    if (oldValue === nextValue) continue;\n    if (typeof nextValue === \"undefined\") {\n      removedAttributes.push(attrName);\n    }\n  }\n  for (var _attrName in template.attributes) {\n    var _oldValue = vNode.attributes[_attrName];\n    var _nextValue = template.attributes[_attrName];\n    if (_oldValue === _nextValue) continue;\n    if (typeof _nextValue !== \"undefined\") {\n      changedAttributes[_attrName] = _nextValue;\n    }\n  }\n  removeAttributes(vNode, removedAttributes);\n  setAttributes(vNode, changedAttributes);\n};\n\nvar DATA_KEY_ATTRIBUTE = \"data-key\";\nfunction patchChildren(template, vNode, patch) {\n  var templateChildrenLength = template.children.length;\n  var vNodeChildrenLength = vNode.children.length;\n  if (!templateChildrenLength && !vNodeChildrenLength) return;\n  var vNodeKeyMap = createKeyMap(vNode.children);\n  var nextChildren = Array(templateChildrenLength);\n  if (vNodeKeyMap !== undefined) {\n    forEach(template.children, function (templateChild, idx) {\n      var childNodes = vNode.node.childNodes;\n      var key = templateChild.attributes[DATA_KEY_ATTRIBUTE];\n      if (Object.prototype.hasOwnProperty.call(vNodeKeyMap, key)) {\n        var keyedChild = vNodeKeyMap[key];\n        if (Array.prototype.indexOf.call(childNodes, keyedChild.node) !== idx) {\n          insertBefore(vNode, keyedChild, childNodes[idx]);\n        }\n        nextChildren[idx] = keyedChild;\n        delete vNodeKeyMap[key];\n        patch(templateChild, nextChildren[idx]);\n      } else {\n        insertBefore(vNode, templateChild, childNodes[idx]);\n        nextChildren[idx] = templateChild;\n      }\n    });\n  } else {\n    forEach(template.children, function (templateChild, idx) {\n      var vNodeChild = vNode.children[idx];\n      if (typeof vNodeChild !== \"undefined\") {\n        patch(templateChild, vNodeChild);\n        nextChildren[idx] = vNodeChild;\n      } else {\n        vNode.node.appendChild(templateChild.node);\n        nextChildren[idx] = templateChild;\n      }\n    });\n  }\n  vNode.children = nextChildren;\n  var childNodesLength = vNode.node.childNodes.length;\n  var delta = childNodesLength - templateChildrenLength;\n  if (delta > 0) {\n    while (delta > 0) {\n      vNode.node.removeChild(vNode.node.childNodes[childNodesLength - 1]);\n      childNodesLength--;\n      delta--;\n    }\n  }\n}\n\nvar patch = function patch(template, vNode, rootNode) {\n  if (!template || !vNode) return;\n  rootNode = rootNode || vNode.node.parentNode;\n  var contentChanged = template.content && template.content !== vNode.content;\n  if (template.type !== vNode.type || contentChanged) {\n    rootNode.replaceChild(template.node, vNode.node);\n    return assignVNode(template, vNode);\n  }\n  updateAttributes(template, vNode);\n  patchChildren(template, vNode, patch);\n};\nvar render = function render(vNode, root) {\n  root.appendChild(vNode.node);\n};\nvar create = function create(node) {\n  var isSVGContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (typeof node === \"string\") {\n    node = toHTML(node);\n  }\n  var isRoot = node.tagName === \"BODY\";\n  var childNodes = node.childNodes;\n  var numChildNodes = childNodes ? childNodes.length : 0;\n  if (isRoot) {\n    if (numChildNodes > 1) {\n      throw new Error(\"[OmDomDom]: Your element should not have more than one root node.\");\n    } else if (numChildNodes === 0) {\n      throw new Error(\"[OmDomDom]: Your element should have at least one root node.\");\n    } else {\n      return create(childNodes[0]);\n    }\n  }\n  var type = node.nodeType === 3 ? \"text\" : node.nodeType === 8 ? \"comment\" : node.tagName.toLowerCase();\n  var isSVG = isSVGContext || type === \"svg\";\n  var attributes = node.nodeType === 1 ? getAttributes(node) : {};\n  var content = numChildNodes > 0 ? null : node.textContent;\n  var children = Array(numChildNodes);\n  forEach(childNodes, function (child, idx) {\n    children[idx] = create(child, isSVG);\n  });\n  return {\n    type: type,\n    attributes: attributes,\n    children: children,\n    content: content,\n    node: node,\n    isSVGContext: isSVG\n  };\n};\n\nexport { create, patch, render };\n//# sourceMappingURL=omdomdom.es.js.map\n","\n\nexport function takeWhileMap<T, A>(pred: (val: T) => A | undefined, lines: T[]): A[] {\n  var output = []\n  for (var line of lines) {\n    let a = pred(line)\n    if (a)\n      output.push(a)\n    else\n      break;\n  }\n\n  return output\n}\n\nexport function dropWhile<T, A>(pred: (val: T) => A | undefined, lines: T[]): T[] {\n  let index = 0;\n  while (index < lines.length && pred(lines[index])) {\n    index++;\n  }\n  return lines.slice(index);\n}\n\n","\nimport { takeWhileMap, dropWhile } from \"./lib\"\n\n\n\nexport type Meta = { key: string, value: string }\nexport type ViewId = string\nexport type RequestId = number\nexport type EncodedAction = string\n\ntype RemoteEvent = { name: string, detail: any }\n\n\nexport function renderMetas(meta: Meta[]): string {\n  return meta.map(m => m.key + \": \" + m.value).join('\\n')\n}\n\nexport type Metadata = {\n  cookies?: string[]\n  // redirect?: string\n  error?: string\n  query?: string\n  events?: RemoteEvent[]\n  actions?: [ViewId, string][],\n  pageTitle?: string\n}\n\n\nexport function toMetadata(meta: Meta[]): Metadata {\n\n  return {\n    cookies: meta.filter(m => m.key == \"Cookie\").map(m => m.value),\n    // redirect: metaValue(\"Redirect\", meta),\n    error: metaValue(\"Error\", meta),\n    query: metaValue(\"Query\", meta),\n    pageTitle: metaValue(\"PageTitle\", meta),\n    events: metaValuesAll(\"Event\", meta).map(parseRemoteEvent),\n    actions: metaValuesAll(\"Trigger\", meta).map(parseAction),\n  }\n}\n\n// viewId: meta.find(m => m.key == \"VIEW-ID\")?.value,\n\nexport function parseMetadata(input: string): Metadata {\n  let metas = takeWhileMap(parseMeta, input.trim().split(\"\\n\"))\n  return toMetadata(metas)\n}\n\n\nexport function metaValue(key: string, metas: Meta[]): string | undefined {\n  return metas.find(m => m.key == key)?.value\n}\n\nexport function metaValuesAll(key: string, metas: Meta[]): string[] {\n  return metas.filter(m => m.key == key).map(m => m.value)\n}\n\nexport type SplitMessage = {\n  command: string,\n  metas: Meta[],\n  rest: string[]\n}\n\n\nexport function splitMessage(message: string): SplitMessage {\n  let lines = message.split(\"\\n\")\n  let command: string = lines[0]\n  let metas: Meta[] = takeWhileMap(parseMeta, lines.slice(1))\n  // console.log(\"Split Metadata\", lines.length)\n  // console.log(\" [0]\", lines[0])\n  // console.log(\" [1]\", lines[1])\n  let rest = dropWhile(l => l == \"\", lines.slice(metas.length + 1))\n\n  return { command, metas, rest }\n}\n\nexport function parseMeta(line: string): Meta | undefined {\n  let match = line.match(/^(\\w+)\\: (.*)$/)\n  if (match) {\n    return {\n      key: match[1],\n      value: match[2]\n    }\n  }\n}\n\n\nexport function parseRemoteEvent(input: string): RemoteEvent {\n  let [name, data] = breakNextSegment(input)\n  return {\n    name,\n    detail: JSON.parse(data)\n  }\n}\n\nexport function parseAction(input: string): [ViewId, string] {\n  let [viewId, action] = breakNextSegment(input)\n  return [viewId, action]\n}\n\nfunction breakNextSegment(input: string): [string, string] | undefined {\n  let ix = input.indexOf('|')\n  if (ix === -1) {\n    let err = new Error(\"Bad Encoding, Expected Segment\")\n    err.message = input\n    throw err\n  }\n  return [input.slice(0, ix), input.slice(ix + 1)]\n}\n\n","\nimport { takeWhileMap } from \"./lib\"\nimport { Meta, ViewId, RequestId, EncodedAction } from \"./message\"\nimport * as message from \"./message\"\n\n\n\nexport type ActionMessage = {\n  viewId: ViewId\n  action: EncodedAction\n  requestId: RequestId\n  meta: Meta[]\n  form: URLSearchParams | undefined\n}\n\n\n\n\nexport function actionMessage(id: ViewId, action: EncodedAction, reqId: RequestId, form?: FormData): ActionMessage {\n  let meta: Meta[] = [\n    { key: \"Cookie\", value: decodeURI(document.cookie) },\n    { key: \"Query\", value: window.location.search }\n  ]\n\n  return { viewId: id, action, requestId: reqId, meta, form: toSearch(form) }\n}\n\nexport function toSearch(form?: FormData): URLSearchParams | undefined {\n  if (!form) return undefined\n\n  const params = new URLSearchParams()\n\n  form.forEach((value, key) => {\n    params.append(key, value as string)\n  })\n\n  return params\n}\n\nexport function renderActionMessage(msg: ActionMessage): string {\n  let header = [\n    \"|ACTION|\",\n    \"ViewId: \" + msg.viewId,\n    \"Action: \" + msg.action,\n    \"RequestId: \" + msg.requestId\n  ]\n\n\n  return [\n    header.join('\\n'),\n    message.renderMetas(msg.meta),\n  ].join('\\n') + renderForm(msg.form)\n}\n\n\nexport function renderForm(form: URLSearchParams | undefined): string {\n  if (!form) return \"\"\n  return \"\\n\\n\" + form\n}\n\nlet globalRequestId: RequestId = 0\n\nexport type Request = {\n  requestId: RequestId\n  isCancelled: boolean\n}\n\nexport function newRequest(): Request {\n  let requestId = ++globalRequestId\n  return { requestId, isCancelled: false }\n}\n\n\n\n// Sanitized Encoding ------------------------------------\n\nexport function encodedParam(action: string, param: string): string {\n  return action + ' ' + sanitizeParam(param)\n}\n\nfunction sanitizeParam(param: string): string {\n  if (param == \"\") {\n    return \"|\"\n  }\n\n  return param.replace(/_/g, \"\\\\_\").replace(/\\s+/g, \"_\")\n}\n","import { ActionMessage, renderActionMessage } from './action'\nimport { Response, FetchError, ResponseBody } from \"./response\"\nimport * as message from \"./message\"\nimport { Meta, SplitMessage, ViewId, RequestId, splitMessage, EncodedAction, metaValue, Metadata } from \"./message\"\n\nconst protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\nconst defaultAddress = `${protocol}//${window.location.host}${window.location.pathname}`\n\n\n\nexport class SocketConnection extends EventTarget {\n  socket: WebSocket\n\n  hasEverConnected: Boolean = false\n  isConnected: Boolean = false\n  reconnectDelay: number = 0\n  queue: ActionMessage[] = []\n\n  // constructor() { super() }\n\n  connect(addr = defaultAddress) {\n    const sock = new WebSocket(addr)\n    this.socket = sock\n\n    function onConnectError(ev: Event) {\n      console.error(\"Connect Error\", ev)\n    }\n\n    function onSocketError(ev: Event) {\n      console.error(\"Socket Error\", ev)\n    }\n\n\n    // initial connection errors\n    sock.addEventListener('error', onConnectError)\n\n    sock.addEventListener('open', (_event) => {\n      console.log(\"Websocket Connected\")\n\n      if (this.hasEverConnected) {\n        document.dispatchEvent(new Event(\"hyp-socket-reconnect\"))\n      }\n\n      this.isConnected = true\n      this.hasEverConnected = true\n      this.reconnectDelay = 1000\n      sock.removeEventListener('error', onConnectError)\n      sock.addEventListener('error', onSocketError)\n\n      document.dispatchEvent(new Event(\"hyp-socket-connect\"))\n\n      this.runQueue()\n    })\n\n    sock.addEventListener('close', _ => {\n      if (this.isConnected) {\n        document.dispatchEvent(new Event(\"hyp-socket-disconnect\"))\n      }\n\n      this.isConnected = false\n      sock.removeEventListener('error', onSocketError)\n\n      // attempt to reconnect in 1s\n      if (this.hasEverConnected) {\n        console.log(\"Reconnecting in \" + (this.reconnectDelay / 1000) + \"s\")\n        setTimeout(() => this.connect(addr), this.reconnectDelay)\n      }\n\n      sock.removeEventListener('error', onSocketError)\n    })\n\n    sock.addEventListener('message', ev => this.onMessage(ev))\n  }\n\n  async sendAction(action: ActionMessage) {\n    if (this.isConnected) {\n      let msg = renderActionMessage(action)\n      this.socket.send(msg)\n    }\n    else {\n      this.queue.push(action)\n    }\n  }\n\n  private runQueue() {\n    // send all messages queued while disconnected \n    let next: ActionMessage | null = this.queue.pop()\n    console.log(\"RUN QUEUE\", next)\n    if (next) {\n      this.sendAction(next)\n      this.runQueue()\n    }\n  }\n\n\n  // full responses will never be sent over!\n  private onMessage(event: MessageEvent) {\n    let { command, metas, rest } = message.splitMessage(event.data)\n    // console.log(\"MESSAGE\", command, metas, rest)\n\n    let requestId = parseInt(requireMeta(\"RequestId\"), 0)\n\n    function requireMeta(key: string): string {\n      let val = metaValue(key, metas)\n      if (!val) throw new ProtocolError(\"Missing Required Metadata: \" + key, event.data)\n      return val\n    }\n\n    function parseResponse(rest: string[]): Update {\n      let viewId = requireMeta(\"ViewId\")\n      let action = requireMeta(\"Action\")\n      return {\n        requestId,\n        viewId,\n        action,\n        meta: message.toMetadata(metas),\n        body: rest.join(\"\\n\"),\n      }\n    }\n\n    function parseUpdate(rest: string[]): Update {\n      let up = parseResponse(rest)\n      up.viewId = requireMeta(\"TargetViewId\")\n      return up\n    }\n\n    function parseRedirect(rest: string[]): Redirect {\n      let url = rest[0]\n      return {\n        requestId,\n        url\n      }\n    }\n\n    switch (command) {\n\n      case \"|UPDATE|\":\n        return this.dispatchEvent(new CustomEvent(\"update\", { detail: parseUpdate(rest) }))\n\n      case \"|RESPONSE|\":\n        return this.dispatchEvent(new CustomEvent(\"response\", { detail: parseResponse(rest) }))\n\n      case \"|REDIRECT|\":\n        return this.dispatchEvent(new CustomEvent(\"redirect\", { detail: parseRedirect(rest) }))\n    }\n  }\n\n\n  // so what if they send remote events in the page? trigger, redirect, page title, etc...\n  // we aren't connected yet on a page thing\n\n  // private async waitMessage(reqId: RequestId, id: ViewId): Promise<ParsedResponse> {\n  //   return new Promise((resolve, reject) => {\n  //     const onMessage = (event: MessageEvent) => {\n  //       let data: string = event.data\n  //       let lines = data.split(\"\\n\").slice(1)  // drop the command line\n  //\n  //       let parsed = splitMetadata(lines)\n  //       let metadata: Metadata = parsed.metadata\n  //\n  //       if (!metadata.requestId) {\n  //         console.error(\"Missing RequestId!\", metadata, event.data)\n  //         return\n  //       }\n  //\n  //       if (metadata.requestId != reqId) {\n  //         // skip, it's not us!\n  //         return\n  //       }\n  //\n  //\n  //       // We have found our message. Remove the listener\n  //       this.socket.removeEventListener('message', onMessage)\n  //\n  //       // set the cookies. These happen automatically in http\n  //       metadata.cookies.forEach((cookie: string) => {\n  //         document.cookie = cookie\n  //       })\n  //\n  //       if (metadata.error) {\n  //         reject(new FetchError(id, metadata.error, parsed.rest.join('\\n')))\n  //         return\n  //       }\n  //\n  //       resolve(parsed)\n  //     }\n  //\n  //     this.socket.addEventListener('message', onMessage)\n  //     this.socket.addEventListener('error', reject)\n  //   })\n  // }\n  //\n  // disconnect() {\n  //   this.socket.close()\n  // }\n}\n\n\nexport type Update = {\n  requestId: RequestId\n  meta: Metadata\n  viewId: ViewId\n  action: EncodedAction\n  body: ResponseBody\n}\n\nexport type Redirect = {\n  requestId: RequestId\n  url: string\n}\n\nexport type MessageType = string\n\n\n// PARSING MESSAGE  ---------------------------------------\n\nexport class ProtocolError extends Error {\n  constructor(description: string, body: string) {\n    super(description + \"\\n\" + body)\n    this.name = \"ProtocolError\"\n  }\n}\n","\nimport * as debounce from 'debounce'\nimport { encodedParam } from './action'\n\nexport type UrlFragment = string\n\nexport function listenKeydown(cb: (target: HTMLElement, action: string) => void): void {\n  listenKeyEvent(\"keydown\", cb)\n}\n\nexport function listenKeyup(cb: (target: HTMLElement, action: string) => void): void {\n  listenKeyEvent(\"keyup\", cb)\n}\n\nexport function listenKeyEvent(event: string, cb: (target: HTMLElement, action: string) => void): void {\n  document.addEventListener(event.toLowerCase(), function(e: KeyboardEvent) {\n    let source = e.target as HTMLInputElement\n\n    let datasetKey = \"on\" + event + e.key\n    let action = source.dataset[datasetKey]\n    if (!action) return\n\n    e.preventDefault()\n    cb(nearestTarget(source), action)\n  })\n}\n\nexport function listenBubblingEvent(event: string, cb: (target: HTMLElement, action: string) => void): void {\n  document.addEventListener(event, function(e) {\n    let el = e.target as HTMLInputElement\n\n    // clicks can fire on internal elements. Find the parent with a click handler\n    let source = el.closest(\"[data-on\" + event + \"]\") as HTMLElement\n    if (!source) return\n\n    e.preventDefault()\n    let target = nearestTarget(source)\n    cb(target, source.dataset[\"on\" + event])\n  })\n}\n\nexport function listenClick(cb: (target: HTMLElement, action: string) => void): void {\n  listenBubblingEvent(\"click\", cb)\n}\n\nexport function listenDblClick(cb: (target: HTMLElement, action: string) => void): void {\n  listenBubblingEvent(\"dblclick\", cb)\n}\n\n\nexport function listenTopLevel(cb: (target: HTMLElement, action: string) => void): void {\n  document.addEventListener(\"hyp-load\", function(e: CustomEvent) {\n    let action = e.detail.onLoad\n    let target = e.detail.target\n    cb(target, action)\n  })\n\n  document.addEventListener(\"hyp-mouseenter\", function(e: CustomEvent) {\n    let action = e.detail.onMouseEnter\n    let target = e.detail.target\n    cb(target, action)\n  })\n\n  document.addEventListener(\"hyp-mouseleave\", function(e: CustomEvent) {\n    let action = e.detail.onMouseLeave\n    let target = e.detail.target\n    cb(target, action)\n  })\n}\n\n\nexport function listenLoad(node: HTMLElement): void {\n\n  // it doesn't really matter WHO runs this except that it should have target\n  node.querySelectorAll(\"[data-onload]\").forEach((load: HTMLElement) => {\n    let delay = parseInt(load.dataset.delay) || 0\n    let onLoad = load.dataset.onload\n    // console.log(\"load start\", load.dataset.onLoad)\n\n    // load no longer exists!\n    // we should clear the timeout or back out if the dom is replaced in the interem\n    setTimeout(() => {\n      let target = nearestTarget(load)\n      // console.log(\"load go\", load.dataset.onLoad)\n\n      if (load.dataset.onload != onLoad) {\n        // the onLoad no longer exists\n        return\n      }\n\n      const event = new CustomEvent(\"hyp-load\", { bubbles: true, detail: { target, onLoad } })\n      load.dispatchEvent(event)\n    }, delay)\n  })\n}\n\nexport function listenMouseEnter(node: HTMLElement): void {\n  node.querySelectorAll(\"[data-onmouseenter]\").forEach((node: HTMLElement) => {\n    let onMouseEnter = node.dataset.onmouseenter\n\n    let target = nearestTarget(node)\n\n    node.onmouseenter = () => {\n      const event = new CustomEvent(\"hyp-mouseenter\", { bubbles: true, detail: { target, onMouseEnter } })\n      node.dispatchEvent(event)\n    }\n  })\n}\n\nexport function listenMouseLeave(node: HTMLElement): void {\n  node.querySelectorAll(\"[data-onmouseleave]\").forEach((node: HTMLElement) => {\n    let onMouseLeave = node.dataset.onmouseleave\n\n    let target = nearestTarget(node)\n\n    node.onmouseleave = () => {\n      const event = new CustomEvent(\"hyp-mouseleave\", { bubbles: true, detail: { target, onMouseLeave } })\n      node.dispatchEvent(event)\n    }\n  })\n}\n\n\nexport function listenChange(cb: (target: HTMLElement, action: string) => void): void {\n  document.addEventListener(\"change\", function(e) {\n    let el = e.target as HTMLElement\n\n    let source = el.closest(\"[data-onchange]\") as HTMLInputElement\n\n    if (!source) return\n    e.preventDefault()\n\n    if (source.value == null) {\n      console.error(\"Missing input value:\", source)\n      return\n    }\n\n    let target = nearestTarget(source)\n    let action = encodedParam(source.dataset.onchange, source.value)\n    cb(target, action)\n  })\n}\n\ninterface LiveInputElement extends HTMLInputElement {\n  debouncedCallback?: Function;\n}\n\nexport function listenInput(startedTyping: (target: HTMLElement) => void, cb: (target: HTMLElement, action: string) => void): void {\n  document.addEventListener(\"input\", function(e) {\n    let el = e.target as HTMLElement\n    let source = el.closest(\"[data-oninput]\") as LiveInputElement\n\n    if (!source) return\n\n    let delay = parseInt(source.dataset.delay) || 250\n    if (delay < 250) {\n      console.warn(\"Input delay < 250 can result in poor performance.\")\n    }\n\n    if (!source?.dataset.oninput) {\n      console.error(\"Missing onInput: \", source)\n      return\n    }\n\n    e.preventDefault()\n\n    let target = nearestTarget(source)\n\n    // I want to CANCEL the active request as soon as we start typing\n    startedTyping(target)\n\n    if (!source.debouncedCallback) {\n      source.debouncedCallback = debounce(() => {\n        let action = encodedParam(source.dataset.oninput, source.value)\n        cb(target, action)\n      }, delay)\n    }\n\n    source.debouncedCallback()\n  })\n}\n\n\n\nexport function listenFormSubmit(cb: (target: HTMLElement, action: string, form: FormData) => void): void {\n  document.addEventListener(\"submit\", function(e) {\n    let form = e.target as HTMLFormElement\n\n    if (!form?.dataset.onsubmit) {\n      console.error(\"Missing onSubmit: \", form)\n      return\n    }\n\n    e.preventDefault()\n\n    let target = nearestTarget(form)\n    const formData = new FormData(form)\n    cb(target, form.dataset.onsubmit, formData)\n  })\n}\n\nfunction nearestTargetId(node: HTMLElement): string | undefined {\n  let targetData = node.closest(\"[data-target]\") as HTMLElement | undefined\n  return targetData?.dataset.target || node.closest(\"[id]\")?.id\n}\n\nfunction nearestTarget(node: HTMLElement): HTMLElement {\n  let targetId = nearestTargetId(node)\n  let target = document.getElementById(targetId)\n\n  if (!target) {\n    console.error(\"Cannot find target: \", targetId, node)\n    return\n  }\n\n  return target\n}\n","import { patch, create } from \"omdomdom/lib/omdomdom.es.js\"\nimport { SocketConnection, Update, Redirect } from './sockets'\nimport { listenChange, listenClick, listenDblClick, listenFormSubmit, listenLoad, listenTopLevel, listenInput, listenKeydown, listenKeyup, listenMouseEnter, listenMouseLeave } from './events'\nimport { actionMessage, ActionMessage, Request, newRequest } from './action'\nimport { ViewId, Metadata, parseMetadata } from './message'\nimport { setQuery } from \"./browser\"\nimport { parseResponse, Response, LiveUpdate } from './response'\n\nlet PACKAGE = require('../package.json');\n\n\n// console.log(\"VERSION 2\", INIT_PAGE, INIT_STATE)\nconsole.log(\"Hyperbole \" + PACKAGE.version)\n\n\nlet rootStyles: HTMLStyleElement;\nlet addedRulesIndex = new Set();\n\n\n\n\n\n// Run an action in a given HyperView\nasync function runAction(target: HyperView, action: string, form?: FormData) {\n  if (target === undefined) {\n    console.error(\"Undefined HyperView!\", action)\n    return\n  }\n\n  if (action === undefined) {\n    console.error(\"Undefined Action!\", target.id)\n    return\n  }\n\n  if (target.activeRequest && !target.activeRequest?.isCancelled) {\n    // Active Request!\n    if (target.concurrency == \"Drop\") {\n      console.warn(\"Drop action overlapping with active request (\" + target.activeRequest + \")\", action)\n      return\n    }\n  }\n\n  target._timeout = setTimeout(() => {\n    // add loading after 100ms, not right away\n    // if it runs shorter than that we probably don't want to show the user any loading feedback\n    target.classList.add(\"hyp-loading\")\n  }, 100)\n\n  let req = newRequest()\n  let msg = actionMessage(target.id, action, req.requestId, form)\n\n  // Set the requestId\n  target.activeRequest = req\n\n  sock.sendAction(msg)\n}\n\n\nfunction handleRedirect(red: Redirect) {\n  console.log(\"REDIRECT\", red)\n  window.location.href = red.url\n}\n\n// in-process update\nfunction handleResponse(res: Update) {\n  // console.log(\"Handle Response\", res)\n  let target = handleUpdate(res)\n\n  // clean up the request\n  delete target.activeRequest\n  clearTimeout(target._timeout)\n  target.classList.remove(\"hyp-loading\")\n}\n\nfunction handleUpdate(res: Update): HyperView {\n  let target = document.getElementById(res.viewId) as HyperView\n\n\n  if (!target) {\n    console.error(\"Missing Update Target: \", res.viewId)\n    return target\n  }\n\n  if (res.requestId < target.activeRequest?.requestId) {\n    // this should only happen on Replace, since other requests should be dropped\n    // but it's safe to assume we never want to apply an old requestId\n    console.warn(\"Ignore Stale Action (\" + res.requestId + \") vs (\" + target.activeRequest.requestId + \"): \" + res.action)\n    return target\n  }\n  else if (target.activeRequest?.isCancelled) {\n    console.warn(\"Cancelled request\", target.activeRequest?.requestId)\n    delete target.activeRequest\n    return target\n  }\n\n  let update: LiveUpdate = parseResponse(res.body)\n\n  if (!update.content) {\n    console.error(\"Empty Response!\", res.body)\n    return target\n  }\n\n  // First, update the stylesheet\n  addCSS(update.css)\n\n\n  // Patch the node\n  const old: VNode = create(target)\n  let next: VNode = create(update.content)\n  next.attributes = old.attributes\n  patch(next, old)\n\n\n  // Emit relevant events\n  let newTarget = document.getElementById(target.id)\n  dispatchContent(newTarget)\n\n  if (newTarget) {\n    // execute the metadata, anything that doesn't interrupt the dom update\n    runMetadata(res.meta, newTarget)\n\n    // now way for these to bubble)\n    listenLoad(newTarget)\n    listenMouseEnter(newTarget)\n    listenMouseLeave(newTarget)\n    fixInputs(newTarget)\n    enrichHyperViews(newTarget)\n  }\n  else {\n    console.warn(\"Target Missing: \", target.id)\n  }\n\n  return target\n}\n// catch (err) {\n//   console.error(\"Caught Error in HyperView (\" + target.id + \"):\\n\", err)\n//\n//   // Hyperbole catches handler errors, and the server controls what to display to the user on an error\n//   //  but if you manage to crash your parent server process somehow, the response may be empty\n//   target.innerHTML = err.body || \"<div style='background:red;color:white;padding:10px'>Hyperbole Internal Error</div>\"\n// }\n\n\n// Remove loading and clear add timeout\n\n// function runMetadataImmediate(meta: Metadata): boolean {\n//   if (meta.redirect) {\n//     // perform a redirect immediately\n//     window.location.href = meta.redirect\n//     return true\n//   }\n// }\n\nfunction runMetadata(meta: Metadata, target?: HTMLElement) {\n  if (meta.query != null) {\n    setQuery(meta.query)\n  }\n\n  if (meta.pageTitle != null) {\n    document.title = meta.pageTitle\n  }\n\n  for (var remoteEvent of meta.events) {\n    setTimeout(() => {\n      let event = new CustomEvent(remoteEvent.name, { bubbles: true, detail: remoteEvent.detail })\n      let eventTarget = target || document\n      eventTarget.dispatchEvent(event)\n    }, 10)\n  }\n\n  meta.actions.forEach(([viewId, action]) => {\n    setTimeout(() => {\n      let view = window.Hyperbole.hyperView(viewId)\n      if (view) {\n        runAction(view, action)\n      }\n    }, 10)\n  })\n}\n\n\nfunction fixInputs(target: HTMLElement) {\n  let focused = target.querySelector(\"[autofocus]\") as HTMLInputElement\n  if (focused?.focus) {\n    focused.focus()\n  }\n\n  target.querySelectorAll(\"input[value]\").forEach((input: HTMLInputElement) => {\n    let val = input.getAttribute(\"value\")\n    if (val !== undefined) {\n      input.value = val\n    }\n  })\n\n  target.querySelectorAll(\"input[type=checkbox]\").forEach((checkbox: HTMLInputElement) => {\n    let checked = checkbox.dataset.checked == \"True\"\n    checkbox.checked = checked\n  })\n}\n\nfunction addCSS(src: HTMLStyleElement | null) {\n  if (!src) return;\n  const rules: any = src.sheet.cssRules\n  for (const rule of rules) {\n    if (addedRulesIndex.has(rule.cssText) == false) {\n      rootStyles.sheet.insertRule(rule.cssText);\n      addedRulesIndex.add(rule.cssText);\n    }\n  }\n}\n\n\n\n\nfunction init() {\n  // metadata attached to initial page loads need to be executed\n  let meta = parseMetadata(document.getElementById(\"hyp.metadata\").innerText)\n  // runMetadataImmediate(meta)\n  runMetadata(meta)\n\n  rootStyles = document.querySelector('style')\n\n  listenTopLevel(async function(target: HyperView, action: string) {\n    runAction(target, action)\n  })\n\n  listenLoad(document.body)\n  listenMouseEnter(document.body)\n  listenMouseLeave(document.body)\n  enrichHyperViews(document.body)\n\n\n  listenClick(async function(target: HyperView, action: string) {\n    // console.log(\"CLICK\", target.id, action)\n    runAction(target, action)\n  })\n\n  listenDblClick(async function(target: HyperView, action: string) {\n    // console.log(\"DBLCLICK\", target.id, action)\n    runAction(target, action)\n  })\n\n  listenKeydown(async function(target: HyperView, action: string) {\n    // console.log(\"KEYDOWN\", target.id, action)\n    runAction(target, action)\n  })\n\n  listenKeyup(async function(target: HyperView, action: string) {\n    // console.log(\"KEYUP\", target.id, action)\n    runAction(target, action)\n  })\n\n  listenFormSubmit(async function(target: HyperView, action: string, form: FormData) {\n    // console.log(\"FORM\", target.id, action, form)\n    runAction(target, action, form)\n  })\n\n  listenChange(async function(target: HyperView, action: string) {\n    runAction(target, action)\n  })\n\n  function onStartedTyping(target: HyperView) {\n    if (target.concurrency == \"Replace\") {\n      target.cancelActiveRequest()\n    }\n  }\n\n  listenInput(onStartedTyping, async function(target: HyperView, action: string) {\n    runAction(target, action)\n  })\n}\n\n\n\nfunction enrichHyperViews(node: HTMLElement): void {\n  // enrich all the hyperviews\n  node.querySelectorAll(\"[id]\").forEach((element: HyperView) => {\n    element.runAction = function(action: string) {\n      runAction(this, action)\n    }.bind(element)\n\n    element.concurrency = element.dataset.concurrency || \"Drop\"\n\n    element.cancelActiveRequest = function() {\n      if (element.activeRequest && !element.activeRequest?.isCancelled) {\n        element.activeRequest.isCancelled = true\n      }\n    }\n\n    dispatchContent(node)\n  })\n}\n\nfunction dispatchContent(node: HTMLElement): void {\n  let event = new Event(\"hyp-content\", { bubbles: true })\n  node.dispatchEvent(event)\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", init)\n\n\n\n\n// Should we connect to the socket or not?\nconst sock = new SocketConnection()\nsock.connect()\nsock.addEventListener(\"update\", (ev: CustomEvent<Update>) => handleUpdate(ev.detail))\nsock.addEventListener(\"response\", (ev: CustomEvent<Update>) => handleResponse(ev.detail))\nsock.addEventListener(\"redirect\", (ev: CustomEvent<Redirect>) => handleRedirect(ev.detail))\n\n\n\n\n\ntype VNode = {\n  // One of three value types are used:\n  // - The tag name of the element\n  // - \"text\" if text node\n  // - \"comment\" if comment node\n  type: string\n\n  // An object whose key/value pairs are the attribute\n  // name and value, respectively\n  attributes: [string: string]\n\n  // Is set to `true` if a node is an `svg`, which tells\n  // Omdomdom to treat it, and its children, as such\n  isSVGContext: Boolean\n\n  // The content of a \"text\" or \"comment\" node\n  content: string\n\n  // An array of virtual node children\n  children: Array<VNode>\n\n  // The real DOM node\n  node: Node\n}\n\n\n\n\n\ndeclare global {\n  interface Window {\n    Hyperbole?: HyperboleAPI;\n  }\n}\n\nexport interface HyperboleAPI {\n  runAction(target: HTMLElement, action: string, form?: FormData): Promise<void>\n  action(con: string, ...params: any[]): string\n  hyperView(viewId: ViewId): HyperView | undefined\n  parseMetadata(input: string): Metadata\n  socket: SocketConnection\n}\n\n\n\n\nexport interface HyperView extends HTMLElement {\n  runAction(target: HTMLElement, action: string, form?: FormData): Promise<void>\n  activeRequest?: Request\n  cancelActiveRequest(): void\n  concurrency: ConcurrencyMode\n  _timeout?: any\n}\n\ntype ConcurrencyMode = string\n\n\nwindow.Hyperbole =\n{\n  runAction: runAction,\n  parseMetadata: parseMetadata,\n  action: function(con, ...params: any[]) {\n    let ps = params.reduce((str, param) => str + \" \" + JSON.stringify(param), \"\")\n    return con + ps\n  },\n  hyperView: function(viewId) {\n    let element = document.getElementById(viewId) as any\n    if (!element?.runAction) {\n      console.error(\"Element id=\" + viewId + \" was not a HyperView\")\n      return undefined\n    }\n    return element\n  },\n  socket: sock\n}\n","\nimport { ViewId, Metadata } from './message'\n\n\n\nexport type Response = {\n  meta: Metadata\n  body: ResponseBody\n}\n\nexport type ResponseBody = string\n\nexport function parseResponse(res: ResponseBody): LiveUpdate {\n  const parser = new DOMParser()\n  const doc = parser.parseFromString(res, 'text/html')\n  const css = doc.querySelector(\"style\") as HTMLStyleElement\n  const content = doc.querySelector(\"div\") as HTMLElement\n\n  return {\n    content: content,\n    css: css\n  }\n}\n\nexport type LiveUpdate = {\n  content: HTMLElement\n  css: HTMLStyleElement | null\n}\n\n\nexport class FetchError extends Error {\n  viewId: ViewId\n  body: string\n  constructor(viewId: ViewId, msg: string, body: string) {\n    super(msg)\n    this.viewId = viewId\n    this.name = \"Fetch Error\"\n    this.body = body\n  }\n}\n","\nexport function setQuery(query: string) {\n  if (query != currentQuery()) {\n    if (query != \"\") query = \"?\" + query\n    let url = location.pathname + query\n    // console.log(\"history.replaceState(\", url, \")\")\n    window.history.replaceState({}, \"\", url)\n  }\n}\n\nfunction currentQuery(): string {\n  const query = window.location.search;\n  return query.startsWith('?') ? query.substring(1) : query;\n}\n"],"names":["debounce","function_","wait","options","TypeError","RangeError","immediate","storedContext","storedArguments","timeoutId","timestamp","result","run","callContext","callArguments","undefined","apply","later","last","Date","now","setTimeout","debounced","arguments_","this","Object","getPrototypeOf","Error","callNow","defineProperty","get","clear","clearTimeout","flush","trigger","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","hasProperty","obj","prop","prototype","hasOwnProperty","call","forEach","items","fn","length","idx","insertBefore","parent","child","refNode","node","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","return","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","Types","DomProperties","createRecord","attrName","propName","type","_ref","_ref2","attr","property","_ref3","_ref4","Namespace","setProperty","element","style","toLowerCase","removeAttribute","parsed","parseInt","isNaN","indexOf","patch","template","vNode","rootNode","parentNode","contentChanged","content","replaceChild","assignVNode","removedAttributes","changedAttributes","attributes","oldValue","nextValue","_attrName","_oldValue","_nextValue","propertyRecord","removeAttributes","startsWith","setAttributeNS","setAttribute","setAttributes","updateAttributes","templateChildrenLength","children","vNodeChildrenLength","vNodeKeyMap","map","_","key","console","warn","keyIsValid","createKeyMap","nextChildren","templateChild","childNodes","keyedChild","vNodeChild","appendChild","childNodesLength","delta","removeChild","patchChildren","create","processedDOMString","isSVGContext","arguments","trim","replace","DOMParser","parseFromString","body","isRoot","tagName","numChildNodes","nodeType","isSVG","reduce","getBaseAttributes","attrValue","getAttribute","getPropertyValues","getAttributes","textContent","takeWhileMap","pred","lines","output","line","a","toMetadata","meta","cookies","filter","m","error","metaValue","query","pageTitle","events","metaValuesAll","parseRemoteEvent","actions","parseAction","parseMetadata","input","parseMeta","split","metas","find","match","data","breakNextSegment","detail","JSON","parse","viewId","action","ix","message","toSearch","form","params","URLSearchParams","append","globalRequestId","encodedParam","param","sanitizeParam","defaultAddress","window","location","protocol","host","pathname","SocketConnection","EventTarget","hasEverConnected","isConnected","reconnectDelay","queue","connect","addr","sock","WebSocket","onConnectError","ev","onSocketError","socket","addEventListener","_event","log","document","dispatchEvent","Event","removeEventListener","runQueue","onMessage","sendAction","msg","requestId","join","renderActionMessage","send","pop","event","command","rest","index","dropWhile","l","requireMeta","val","ProtocolError","parseResponse","CustomEvent","up","parseUpdate","url","parseRedirect","description","super","listenKeyEvent","cb","e","source","target","datasetKey","dataset","preventDefault","nearestTarget","listenBubblingEvent","closest","listenLoad","querySelectorAll","load","delay","onLoad","onload","bubbles","listenMouseEnter","onMouseEnter","onmouseenter","listenMouseLeave","onMouseLeave","onmouseleave","targetId","targetData","id","nearestTargetId","getElementById","rootStyles","PACKAGE","version","addedRulesIndex","Set","async","runAction","activeRequest","isCancelled","concurrency","_timeout","classList","add","req","reqId","decodeURI","cookie","search","actionMessage","handleUpdate","res","update","doc","css","querySelector","src","rules","sheet","cssRules","rule","has","cssText","insertRule","addCSS","old","newTarget","dispatchContent","runMetadata","focused","focus","checkbox","checked","fixInputs","enrichHyperViews","remoteEvent","substring","currentQuery","history","replaceState","setQuery","title","view","Hyperbole","hyperView","bind","cancelActiveRequest","innerText","onsubmit","formData","FormData","onchange","oninput","startedTyping","debouncedCallback","remove","handleResponse","handleRedirect","red","href","con","str","stringify"],"sourceRoot":""}